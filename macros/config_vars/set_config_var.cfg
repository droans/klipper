[gcode_macro SET_CONFIG_VAR]
description: Set the value of a config variable
gcode:
    {% set echo = params.ECHO | default('no') %}
    {% set var = params.VAR | lower %}
    {% set val = params.VAL %}

    {% set config_vars = printer['gcode_macro _CONFIGS'] %}

    {% if var not in config_vars %}
        M118 Failed to to set config variable {var}.
        M118 Variable not found in config
        M118 Please check macros and correct this. 
    {% else %}

        SET_GCODE_VARIABLE MACRO=_CONFIGS VARIABLE={var} VALUE={val}
        {% if echo == 'yes' %}
            M118 Config variable {var} updated to {val}
        {% endif %}

    {% endif %}