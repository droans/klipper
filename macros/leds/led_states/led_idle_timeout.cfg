[gcode_macro _LED_IDLE_TIMEOUT]
description: LED State during Idle Timeout.
gcode:
    SET_LED_STATE STATE="idle"

[gcode_macro _LED_IDLE_BLINK_ON]
gcode:
    SET_LED_STATE STATE="idle_blink"

[gcode_macro _LED_IDLE_BLINK_OFF]
gcode:
    SET_LED_STATE STATE="idle_off"

[gcode_macro _IDLE_LEDS_CONF]
variable_set = 'off'
gcode = 

[delayed_gcode _LED_IDLE_BLINK]
initial_duration = 0
gcode = 
	{% set current_state = printer['gcode_macro _IDLE_LEDS_CONF'].set %}
	{% if set =='off' %}
	_LED_IDLE_BLINK_ON
	SET_GCODE_VARIABLE MACRO=set VALUE='on'
	{% else %}
	_LED_IDLE_BLINK_OFF
	SET_GCODE_VARIABLE MACRO=set VALUE='off'
	{% endif %}
	UPDATE_DELAYED_GCODE ID=_LED_IDLE_BLINK DURATION=0.25