[gcode_macro _LED_PRINT_FINISHED]
description: LED State when print finished.
gcode:
    {% set defaults = printer["gcode_macro _CONFIGS"] %}

    {% set red = defaults.led_print_complete_red | float %}
    {% set green = defaults.led_print_complete_green | float %}
    {% set blue = defaults.led_print_complete_blue | float %}
    {% set white = defaults.led_print_complete_white | float %}
    {% set index = defaults.led_print_complete_index | int %}
    {% set transmit = defaults.led_print_complete_transmit | int %}
    {% set strip = defaults.led_print_complete_strip  %}

    {% set normal_state_delay = defaults.led_print_complete_delay_normal | float %}

    {% if index == -1 %}
        SET_LED LED={strip} RED={red} GREEN={green} BLUE={blue} WHITE={white} TRANSMIT={transmit}
    {% else %}
        SET_LED LED={strip} RED={red} GREEN={green} BLUE={blue} WHITE={white} TRANSMIT={transmit} INDEX={index}
    {% endif %}

    UPDATE_DELAYED_GCODE ID=_RETURN_LED_TO_NORMAL DURATION={normal_state_delay}