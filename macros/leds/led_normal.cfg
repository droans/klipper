[delayed_gcode _RETURN_LED_TO_NORMAL]
initial_duration: 0
gcode:
    _LED_NORMAL

[gcode_macro _LED_NORMAL]
description: LED State when printer on and after configured print end/cancel time.
gcode:
    {% set defaults = printer["gcode_macro _CONFIGS"] %}

    {% set red = defaults.led_normal_red | float %}
    {% set green = defaults.led_normal_green | float %}
    {% set blue = defaults.led_normal_blue | float %}
    {% set white = defaults.led_normal_white | float %}
    {% set index = defaults.led_normal_index | int %}
    {% set transmit = defaults.led_normal_transmit | int %}
    {% set strip = defaults.led_normal_strip  %}

    {% if index == -1 %}
        SET_LED LED={strip} RED={red} GREEN={green} BLUE={blue} WHITE={white} TRANSMIT={transmit}
    {% else %}
        SET_LED LED={strip} RED={red} GREEN={green} BLUE={blue} WHITE={white} TRANSMIT={transmit} INDEX={index}
    {% endif %}