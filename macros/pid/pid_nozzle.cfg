[gcode_macro PID_NOZZLE]
description: PID Tune Nozzle
gcode:
    {% set temp = params.TEMP | default(-1) | float %}
    {% set min_nozzle_temp = printer["gcode_macro _CONFIGS"].pid.temps.hotend.min | float %}
    {% set max_nozzle_temp = printer["gcode_macro _CONFIGS"].pid.temps.hotend.max | float %}

    {% if temp < min_nozzle_temp %}
        M118 Cannot PID Tune: Temp ({temp}) lower than minimum temp ({min_nozzle_temp})!
    {% elif temp > max_nozzle_temp %}
        M118 Cannot PID Tune: Temp ({temp}) higher than maximum temp ({max_nozzle_temp})!
    {% else %}
        PID_CALIBRATE HEATER=extruder TARGET={temp}
    {% endif %}