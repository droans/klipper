[gcode_macro M601]
description: Filament Change Additional Retraction
gcode:
    {% set config_vars = printer["gcode_macro _CONFIGS"] %}
    {% set e = config_vars.fil_change_extra_retract_mm | float %}
    {% set f = config_vars.fil_change_retract_speed | float %}

    {% if e < 0 %}
        {% set e = e * -1 %}
    {% endif %}

    {% set f = f * 60 %}

    G1 E-{e} F{f}
