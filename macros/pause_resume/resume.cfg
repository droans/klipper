[gcode_macro RESUME]
description: Resume print
rename_existing: BASE_RESUME
gcode:
    {% set config_vars = printer["gcode_macro _CONFIGS"] %}
    {% set restore_state = config_vars.pause_gcode_state_saved %}
    {% set pause_state_name = config_vars.pause_gcode_state_name %}
    {% set restore_state_name = params.RESTORE_STATE_NAMED | default(-1) %}

    {% if restore_state %}
        RESTORE_GCODE_STATE NAME={pause_state_name} MOVE=1    
    {% endif %}

    {% if restore_state_name != -1 %}
        RESTORE_GCODE_STATE NAME={restore_state_name} MOVE=1
    {% endif %}

    BASE_RESUME