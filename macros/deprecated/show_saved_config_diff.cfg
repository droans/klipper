[gcode_macro SHOW_DIFF_SAVED_AND_CONFIG]
description: Print the difference between active config variables and saved variables.
gcode:
    {% set saved_vars = printer.save_variables.variables %}
    {% set config_vars = printer['gcode_macro _CONFIGS'] %}

    {% for key, val in config_vars.items() %}
        {% set c_val = config_vars[key] %}

        {% if key in saved_vars %}
            {% set s_val = saved_vars[key] %}
            
            {% if s_var != c_var %}
                M118 {key}: Current Val {c_val}, Saved Val {s_val}
            {% endif %}
        {% else %}
            M118 {key}: Current Val {cval}, not present in saved variables

        {% endif %}

    {% endfor %}

    M118 All differences printed