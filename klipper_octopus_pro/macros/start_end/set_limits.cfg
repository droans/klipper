[gcode_macro SET_LIMITS]
description: Set the printer limits. Args: ACCEL, SPEED,SQUARE_CORNER, DECEL
gcode:
    {% set accel_limit = params.ACCEL | default(-1) | float %}
    {% set speed_limit = params.SPEED | default(-1) | float %}
    {% set sq_corner_limit = params.SQUARE_CORNER | default(-1) | float %}
    {% set decel_limit = params.DECEL | default(-1) | float %}

    {% if accel_limit != -1 %}
        SET_VELOCITY_LIMIT ACCEL={accel_limit}
        M118 Accel limit adjusted to {accel_limit}

    {% endif %}

    {% if speed_limit != -1 %}
        SET_VELOCITY_LIMIT VELOCITY={speed_limit}
        M118 Speed limit adjusted to {speed_limit}

    {% endif %}

    {% if sq_corner_limit != -1 %}
        SET_VELOCITY_LIMIT SQUARE_CORNER_VELOCITY={sq_corner_limit}
        M118 Square Corner Velocity Limit adjusted to {sq_corner_limit}

    {% endif %}

    {% if decel_limit != -1 %}
        SET_VELOCITY_LIMIT ACCEL_TO_DECEL={decel_limit}
        M118 Accel to Decel limit adjusted to {decel_limit}

    {% endif %}
    