[gcode_macro _LOOP_NESTED_DICT]
variable_return_value: 0
gcode:

    {% set ns = namespace(d=params.DICT) %}
    {% set drill_down =  params.DRILL %}
    
    {% if drill_down is not iterable %}
        {% set drill_down = [drill_down] %}
    {% endif %}

    {% for item in drill_down %}
        {% set ns.d = ns.d[item] %}
    {% endfor %}

    M118 Setting Nested Dict Return Val to {variable_return_value}

    SET_GCODE_VARIABLE MACRO=_LOOP_NESTED_DICT VARIABLE=variable_return_value VALUE={ns.d}