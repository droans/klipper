[gcode_macro _GEN_MACRO_HELP_PARAMS]
gcode:
    {% set param_spacing_ct = 2 %}
    {% set param_spacing_char = '*' %}
    {% set param_spacing = param_spacing_char * ct %}
    
    {% set desc_spacing_ct = 8 %}
    {% set desc_spacing_char = ' ' %}
    {% set desc_spacing = desc_spacing_char * desc_spacing_ct %}

    {% set macro_params = params.MACRO_PARAMS %}

    

    M118 Parameters:
    {% for key, val in macro_params.items() %}

        {% if 'DEFAULT' in val %}

            {% set default_val = ' (Default: ' + val['default'] + ')' %}

        {% else %}

            {% set default_val = '' %}
        
        {% endif %}

        {% if key is string %}
        
            {% set p = key %}
               
        {% else %}

            {%set p = key.join(', ') %}

        {% endif %}

        M118 {param_spacing + p + default_val}

        {% set param_desc = val['DESC'] %}

        {% if param_desc is string %}

            M118 {desc_spacing + param_desc}

        {% else %}

            _ITER_M118 DATA=val.join('~~' + desc_spacing).split('~~')

        {% endif %}

    {% endfor %}