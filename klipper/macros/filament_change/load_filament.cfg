[gcode_macro LOAD_CHANGE_FILAMENT]
description: Load the filament after changing it. Can run as many times as needed. Use RESUME to resume print.
gcode:
    {% set load_mm = params.LOAD_MM | default(printer.save_variables.load_mm) | default(50) | float %}
    {% set load_speed = params.LOAD_SPEED | default(printer.save_variables.load_speed) | default(500) | float %}

    {% if load_mm < 0 %}
        {% set load_mm = -1 * load_mm %}
    {% endif %}

    G91

    G1 E{load_mm} F{load_speed}
        